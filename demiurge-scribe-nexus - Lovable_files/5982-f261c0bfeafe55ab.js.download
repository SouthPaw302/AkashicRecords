try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="57966933-8075-44b2-a4ee-b6e4fbec8816",e._sentryDebugIdIdentifier="sentry-dbid-57966933-8075-44b2-a4ee-b6e4fbec8816")}catch(e){}"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5982],{39:(e,s,t)=>{t.d(s,{BK:()=>o,eu:()=>i,q5:()=>c});var a=t(99289),r=t(77319),l=t(11405),n=t(26551);let i=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.bL,{ref:s,className:(0,n.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t),...l})});i.displayName=r.bL.displayName;let o=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r._V,{ref:s,className:(0,n.cn)("aspect-square h-full w-full",t),...l})});o.displayName=r._V.displayName;let c=l.forwardRef((e,s)=>{let{className:t,...l}=e;return(0,a.jsx)(r.H4,{ref:s,className:(0,n.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",t),...l})});c.displayName=r.H4.displayName},4099:(e,s,t)=>{t.d(s,{_:()=>o});var a=t(99289),r=t(11405),l=t(39),n=t(99017),i=t(26551);let o=e=>{let{name:s,isInteractive:t,className:o,photoSrc:c,userColor:d,isWorkspace:m=!1,tooltipContent:u=s,...h}=e,p=s?s.charAt(0).toUpperCase():"",[x,f]=(0,r.useState)(!1);return(0,a.jsxs)(n.m_,{open:!!t&&!!s&&x,onOpenChange:f,children:[(0,a.jsx)(n.k$,{asChild:!0,children:(0,a.jsxs)(l.eu,{className:(0,i.cn)("h-[26px] w-[26px] shrink-0 border border-transparent text-xs",{["hover:bg-".concat(d)]:!c&&!m&&t,"cursor-pointer":t,["hover:border-".concat(d)]:t,["group-[.avatars]:hover:border-".concat(d)]:t,"group-[.avatars]:border-background":!0,"rounded-[8px] hover:border-transparent":m},o),...h,children:[(0,a.jsx)(l.BK,{className:"aspect-auto object-cover",src:c}),(0,a.jsx)(l.q5,{className:(0,i.cn)("font-medium text-white bg-".concat(d),m&&"rounded-[8px]",o),children:p})]})}),(0,a.jsx)(n.ZI,{children:u})]})}},5790:(e,s,t)=>{t.d(s,{Q:()=>l});var a=t(11405);let r=["brand-ocean-primary","brand-twilight-primary","brand-flamingo-primary","brand-bubblegum-primary","brand-saffron-primary","brand-tiger-primary"];function l(e){return(0,a.useMemo)(()=>{e||(e="fake-user");let s=function(e){let s=0;for(let t=0;t<e.length;t++)s=(s<<5)-s+e.charCodeAt(t),s&=s;return Math.abs(s)}(e)%r.length;return r[s]},[e])}},8497:(e,s,t)=>{t.d(s,{d:()=>r});var a=t(11405);function r(e,s){let[t,r]=(0,a.useState)(e);return(0,a.useEffect)(()=>{let t=setTimeout(()=>{r(e)},s);return()=>{clearTimeout(t)}},[e,s]),t}},13432:(e,s,t)=>{t.d(s,{I7:()=>l,Pf:()=>r,y:()=>n});var a=t(72384);async function r(e,s){let t=a.y.workspaceMemberships({workspaceId:s});await e.cancelQueries({queryKey:t.queryKey})}function l(e,s,t,r,l,n){var i,o;let c=a.y.workspaceMemberships({workspaceId:s}),d=e.getQueryData(c.queryKey);if(d&&e.setQueryData(c.queryKey,{...d,members:r(d.members),total:n?n(d.total):d.total,limit:d.limit,offset:null!=(i=d.offset)?i:0,has_more:d.has_more}),t){let i=a.y.searchWorkspaceMemberships({workspaceId:s,params:t}),c=e.getQueryData(i.queryKey);if(c){let s=l?l(c.members):r(c.members);e.setQueryData(i.queryKey,{...c,members:s,total:n?n(c.total):c.total,limit:c.limit,offset:null!=(o=c.offset)?o:0,has_more:c.has_more})}}}function n(e,s,t,r){let l={refetchType:(null==r?void 0:r.refetch)?"active":"none"};e.invalidateQueries({queryKey:a.y.workspaceMemberships({workspaceId:s}).queryKey,...l}),t&&e.invalidateQueries({queryKey:a.y.searchWorkspaceMemberships({workspaceId:s,params:t}).queryKey,...l})}},17651:(e,s,t)=>{t.d(s,{K4:()=>o,_A:()=>i,yj:()=>c});var a=t(34363),r=t(11405),l=t(72384),n=t(82360);function i(e){let{workspaceId:s}=e,[t,i]=(0,r.useState)({query:"",status:"all",limit:n.m,offset:0}),{data:o,isLoading:c,error:d}=(0,a.I)(l.y.searchWorkspaceMemberships({workspaceId:s,params:t})),m=(0,r.useCallback)(e=>{i(s=>{let t={...s,...e};return(void 0!==e.query||void 0!==e.status)&&(t.offset=0),t})},[]),u=(0,r.useCallback)(()=>{(null==o?void 0:o.has_more)&&i(e=>({...e,offset:(e.offset||0)+n.m}))},[null==o?void 0:o.has_more]);return{members:(null==o?void 0:o.members)||[],total:(null==o?void 0:o.total)||0,hasMore:(null==o?void 0:o.has_more)||!1,isLoading:c,error:d,search:m,loadMore:u,searchParams:t}}function o(e){let{workspaceId:s}=e,{data:t,isLoading:r,error:n}=(0,a.I)(l.y.searchWorkspaceMemberships({workspaceId:s,params:{query:"",status:"active",role:"owner",limit:1}}));return{owner:(null==t?void 0:t.members[0])||null,isLoading:r,error:n}}function c(e){let{workspaceId:s,status:t="active",enabled:r=!0}=e,{data:n}=(0,a.I)({...l.y.searchWorkspaceMemberships({workspaceId:s,params:{query:"",status:t,limit:1}}),enabled:r&&!!s});return{memberCount:(null==n?void 0:n.total)||0}}},26516:(e,s,t)=>{t.d(s,{H:()=>n,k:()=>i});var a=t(99289),r=t(11405);let l=(0,r.createContext)(null),n=()=>(0,r.useContext)(l),i=e=>{let{children:s,searchParams:t}=e;return(0,a.jsx)(l.Provider,{value:t,children:s})}},30394:(e,s,t)=>{t.d(s,{M:()=>p});var a=t(99289),r=t(11405),l=t(50471),n=t(98213),i=t(49944),o=t(5531),c=t(97757),d=t(66184),m=t(37552),u=t(31126);let h=e=>{var s,t;let{selectedRole:l,onRoleChange:n,roleOptions:d,disabled:m=!1,workspace:h}=e,[p,x]=(0,r.useState)(!1);return m?(0,a.jsx)(i.$,{variant:"ghost",size:"sm",className:"flex-shrink-0 gap-1.5 font-normal",disabled:!0,children:null==(t=d.find(e=>e.value===l))?void 0:t.label}):(0,a.jsxs)(o.rI,{open:p,onOpenChange:x,children:[(0,a.jsx)(o.ty,{asChild:!0,children:(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",className:"flex-shrink-0 gap-1.5 font-normal",children:[null==(s=d.find(e=>e.value===l))?void 0:s.label,(0,a.jsx)(c.A,{name:"keyboard_arrow_down",size:"small"})]})}),(0,a.jsx)(o.SQ,{children:(0,a.jsx)(o.Hr,{value:l,onValueChange:e=>{n(e),x(!1)},children:d.map(e=>(0,a.jsxs)(o.Ht,{value:e.value,className:"hover:bg-accent",children:[e.label,("read"===e.value||"viewer"===e.value)&&h&&(0,a.jsx)(u.M,{workspace:h,requiredPlanCategory:"pro"})]},e.value))})})]})},p=e=>{let{onInvite:s,isInviting:t,roleOptions:o,defaultRole:c,canSelectRoles:u=!0,placeholder:p="Add emails",completelyDisabled:x=!1,onInputChange:f,workspace:g}=e,[w,v]=(0,r.useState)([]),[j,b]=(0,r.useState)(""),[y,_]=(0,r.useState)(c),N=w.length>0||""!==j.trim(),E=async()=>{let e=[...w],t=j.trim();if(""===t||w.includes(t)||(e.push(t),v(e),b("")),0===e.length)return;if(e.length>0&&!e.every(e=>(0,d.xf)(e)))return void(1===e.length?n.oR.error("Invalid email address",{description:"Please check the email address and try again."}):n.oR.error("Invalid email address",{description:"One or more email addresses are invalid. Please check and try again."}));let{success:a}=await s({emails:e,role:y});a&&(v([]),b(""),null==f||f(""))};(0,l.vC)("mod+enter",e=>{e.preventDefault(),t||E()},{enableOnFormTags:!0});let C=""===j.trim()&&0===w.length;return(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(m.u,{tags:w,setTags:v,inputValue:j,setInputValue:e=>{b(e),null==f||f(e)},placeholder:p,disabled:x,className:"min-w-0 flex-1",validateItem:e=>(0,d.xf)(e)?null:"This is not a valid email."}),N&&(0,a.jsx)(h,{selectedRole:y,onRoleChange:_,roleOptions:o,disabled:!u||x,workspace:g}),(0,a.jsx)(i.$,{onClick:E,variant:"affirmative",className:"flex-shrink-0",disabled:t||C||x,loading:t,children:"Invite"})]})}},31126:(e,s,t)=>{t.d(s,{M:()=>o});var a=t(99289);t(11405);var r=t(97115),l=t(26551),n=t(97757),i=t(99017);let o=e=>{let{workspace:s,requiredPlanCategory:t,className:o,...c}=e,d=(0,r.TP)(t),m=(0,r._R)(s.plan),u=(0,r.m6)(s.plan),h=!(0,r.my)(u,t);return(0,a.jsxs)(i.m_,{children:[(0,a.jsx)(i.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:(0,l.cn)("flex h-5 cursor-pointer items-center gap-1 rounded-sm bg-brand-twilight px-2 py-px text-xs font-medium text-brand-twilight-foreground hover:bg-brand-twilight/80",o),...c,children:[(0,a.jsx)(n.A,{name:"lovable_icon",size:"xsmall"}),(0,a.jsx)("p",{className:(0,l.cn)("flex",{hidden:!h}),children:d})]})}),(0,a.jsx)(i.ZI,{children:h?(0,a.jsxs)("p",{children:["Upgrade to ",d," to access this feature."]}):(0,a.jsxs)("p",{children:["Included in ",m]})})]})}},37552:(e,s,t)=>{t.d(s,{u:()=>d});var a=t(99289),r=t(53417),l=t(26551),n=t(9562),i=t(97757);let o=/[,;\n\t]+/g,c=/\s+/g,d=e=>{let{tags:s,setTags:t,inputValue:d,setInputValue:m,placeholder:u="Type and press Enter...",className:h="",validateItem:p,error:x,...f}=e,g=e=>{t(s.filter((s,t)=>t!==e))},w=s.some(e=>!!p&&p(e));return(0,a.jsxs)("div",{className:(0,l.cn)("flex min-h-9 w-full min-w-0 flex-wrap items-center gap-1.5 overflow-hidden rounded-md border border-input bg-transparent p-2 py-1.5 text-sm shadow-sm transition-colors focus-within:ring-1 focus-within:ring-ring",(x||w)&&"border-destructive focus-within:ring-destructive",h),children:[s.map((e,s)=>{let t=p?p(e):null;return(0,a.jsx)(n.Q,{showTooltip:!!t,tooltipContent:t||"",instant:!0,className:"min-w-0",children:(0,a.jsxs)(r.E,{variant:"secondary",className:"flex min-w-0 cursor-default items-center gap-1 rounded-sm px-1 py-0 text-xs font-medium",children:[t&&(0,a.jsx)(i.A,{name:"warning_fill",className:"text-destructive-primary",size:"small"}),(0,a.jsx)("span",{className:"min-w-0 max-w-[160px] overflow-hidden truncate md:whitespace-nowrap",children:e}),(0,a.jsx)("button",{type:"button",className:"flex-shrink-0 rounded-sm duration-100 ease-out hover:bg-muted-hover",onClick:()=>g(s),children:(0,a.jsx)(i.A,{name:"close_small"})})]})},s)}),(0,a.jsx)("input",{type:"text",value:d,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"!==e.key&&","!==e.key&&" "!==e.key||e.metaKey||""===d.trim()?"Backspace"===e.key&&""===d&&s.length>0&&g(s.length-1):(e.preventDefault(),(e=>{s.includes(e)||""===e.trim()||t([...s,e]),m("")})(d.trim()))},onPaste:e=>{e.preventDefault();let a=e.clipboardData.getData("text").replace(o," ").replace(c," ").trim().split(" ").map(e=>e.trim()).filter(e=>""!==e),r=new Set(s),l=[...s];a.forEach(e=>{let s=""!==e.trim();!r.has(e)&&s&&(l.push(e),r.add(e))}),t(l)},placeholder:u,className:"min-w-[80px] flex-1 bg-transparent text-sm outline-none placeholder:text-muted-foreground",...f})]})};d.displayName="TagsInput"},44593:(e,s,t)=>{t.d(s,{H:()=>m});var a=t(99289),r=t(22291),l=t(76704),n=t(40177),i=t(49944),o=t(6072),c=t(15207),d=t(86077);function m(e){let{open:s,onOpenChange:t}=e,m=(0,r.useRouter)(),u=(0,l.c3)("AuthDialog"),h=(0,n.Tp)(c.x.GetStartedForFree);return(0,a.jsx)(o.lG,{open:s,onOpenChange:t,children:(0,a.jsxs)(o.Cf,{className:"gap-4",size:"sm",children:[(0,a.jsxs)("div",{className:"flex flex-col items-start gap-4",children:[(0,a.jsx)(d.Fy,{className:"h-9"}),(0,a.jsxs)(o.c7,{children:[(0,a.jsx)(o.L3,{className:"text-3xl",children:u("title")}),(0,a.jsx)(o.rr,{children:u("description")})]})]}),(0,a.jsxs)("div",{className:"mt-4 flex flex-col gap-3",children:[(0,a.jsx)(i.$,{onClick:()=>m.push("/login"),className:"w-full",variant:"outline",children:u("logIn")}),(0,a.jsx)(i.$,{onClick:()=>m.push("/signup"),className:"w-full",children:u(h?"getStartedForFree":"signUp")})]})]})})}},45747:(e,s,t)=>{t.d(s,{P:()=>i});var a=t(99289),r=t(49612),l=t(53417),n=t(26551);let i=e=>{let{id:s,username:t,displayName:i,photoURL:o,avatarClassName:c,actionComponent:d,email:m,isCurrentUser:u=!1,isInvited:h=!1,showBadge:p=!0}=e;return(0,a.jsxs)("div",{className:"flex items-center justify-start gap-3 py-1 md:flex-nowrap",children:[(0,a.jsx)(r.H,{className:(0,n.cn)(c,h&&"opacity-60"),user:{id:s,username:null!=i?i:m},photoURL:o,isInteractive:!1}),(0,a.jsx)("div",{className:"flex min-w-0 flex-shrink items-center gap-4 ".concat(h&&"opacity-60"),children:(0,a.jsxs)("div",{className:"flex min-w-0 flex-col gap-0",children:[(0,a.jsxs)("div",{className:"flex-shrink truncate text-sm font-medium leading-tight",children:[i," ",u&&(0,a.jsx)("span",{className:"font-normal",children:"(you)"})]}),(0,a.jsx)("span",{className:"max-w-[150px] flex-shrink truncate text-xs text-muted-foreground",children:m})]})}),h&&p&&(0,a.jsx)(l.E,{variant:"outline",className:"hidden gap-1 bg-muted text-xs font-medium text-muted-foreground md:flex",children:"Invite sent"}),d&&(0,a.jsx)("div",{className:"ml-auto flex-shrink-0",children:d})]})}},49612:(e,s,t)=>{t.d(s,{H:()=>n});var a=t(99289),r=t(4099),l=t(5790);let n=e=>{var s;let{isInteractive:t=!1,className:n,user:i,photoURL:o,...c}=e,d=(0,l.Q)(null==i?void 0:i.id),m=(null==i||null==(s=i.attributes)?void 0:s.display_name)||(null==i?void 0:i.username)||(null==i?void 0:i.id);return(0,a.jsx)(r._,{name:m,isInteractive:t,photoSrc:o,userColor:d,className:n,...c})}},61461:(e,s,t)=>{t.d(s,{A:()=>i});var a=t(99289),r=t(11405),l=t(49944),n=t(6072);let i=e=>{let{title:s="Remove",targetName:t,descriptionTemplate:i="Are you sure you want to remove {name}? They will no longer have access.",confirmButtonText:o="Remove",cancelButtonText:c="Cancel",onConfirm:d,onCancel:m}=e,[u,h]=(0,r.useState)(!1),p=async()=>{h(!0);try{await d()}finally{h(!1)}},x=i.replace("{name}",t);return(0,a.jsxs)(n.Cf,{size:"sm",children:[(0,a.jsxs)(n.c7,{children:[(0,a.jsx)(n.L3,{children:s}),(0,a.jsx)(n.rr,{children:x})]}),(0,a.jsxs)(n.Es,{className:"gap-2 sm:justify-end",children:[(0,a.jsx)(l.$,{variant:"outline",onClick:m,disabled:u,children:c}),(0,a.jsx)(l.$,{variant:"destructive",onClick:p,disabled:u,loading:u,children:u?"Removing...":o})]})]})}},66184:(e,s,t)=>{t.d(s,{VC:()=>o,wO:()=>i,xf:()=>n});var a=t(99490);let r=a.Yj().min(1,"Email is required").email("Please enter a valid email address"),l=a.YO(r).max(3,"You can invite up to 3 team members").refine(e=>new Set(e.map(e=>e.toLowerCase())).size===e.length,{message:"Duplicate email addresses are not allowed"});function n(e){return r.safeParse(e).success}function i(e){let s=e.filter(e=>""!==e.trim());return l.safeParse(s)}function o(e,s){let t=e.filter(e=>""!==e.trim()),a=l.safeParse(t),n=[null,null,null];for(let s=0;s<3;s++){let t=e[s];if(t&&t.trim()){let e=r.safeParse(t);if(!e.success){var i;n[s]=(null==(i=e.error.errors[0])?void 0:i.message)||"Invalid email address"}}}let o=[];return a.success||(o=a.error.errors.filter(e=>0===e.path.length).map(e=>e.message)),s&&t.some(e=>e.trim().toLowerCase()===s.trim().toLowerCase())&&o.push("You cannot invite yourself"),{globalErrors:o,fieldErrors:n}}},73728:(e,s,t)=>{t.d(s,{B5:()=>p,Nn:()=>x,oQ:()=>m,tY:()=>h});var a=t(99289),r=t(34363),l=t(11405),n=t(76918),i=t(72384),o=t(33063),c=t(9563);let d=(0,l.createContext)(null),m=e=>{let{children:s}=e,t=(0,l.useRef)((0,n.vt)(()=>({projectWorkspace:null,membership:null,permissions:{read:!1,write:!1,admin:!1},isLoading:!0,hasFetchedProjectWorkspace:!1,project:null}))),{workspaceId:m,project:u}=(0,c.Iw)(e=>{var s;return{workspaceId:null==(s=e.project)?void 0:s.workspace_id,project:e.project}}),[h,p]=(0,l.useState)(null),[x,f]=(0,l.useState)("idle"),{data:g}=(0,r.I)(i.y.detail({workspaceId:m,projectId:null==u?void 0:u.id})),[w,v]=(0,l.useState)(null);(0,l.useEffect)(()=>{if(!m){p(null),f("success"),v(null);return}if(f("loading"),g){var e,s;t.current.setState({projectWorkspace:g.workspace,membership:null!=(e=g.current_member)?e:null}),v(null!=(s=g.current_member)?s:null),p(g.workspace),f("success")}},[g,m]),(0,l.useEffect)(()=>{let e={read:!!w,write:!!w,admin:(null==w?void 0:w.role)==="admin"||(null==w?void 0:w.role)==="owner"};t.current.setState({project:u,projectWorkspace:h,membership:w,permissions:e,isLoading:"loading"===x})},[h,x,w,u]),(0,l.useEffect)(()=>{("success"===x||"error"===x)&&t.current.setState({hasFetchedProjectWorkspace:!0})},[x]);let j=(0,o.O)();(0,l.useEffect)(()=>(null==j||j.setProjectWorkspaceId(null!=m?m:null),()=>{null==j||j.setProjectWorkspaceId(null)}),[m,j]);let b={store:t.current};return(0,a.jsx)(d.Provider,{value:b,children:s})};function u(){return(0,l.useContext)(d)}function h(){return!!u()}function p(e){let{store:s}=function(){let e=(0,l.useContext)(d);if(!e)throw Error("useProjectWorkspaceContext must be used within a ProjectWorkspaceProvider");return e}();return s(e)}function x(e){let s=u(),t=null==s?void 0:s.store;return t?t(e):null}},74846:(e,s,t)=>{t.d(s,{Cb:()=>S,X5:()=>F});var a=t(11405),r=t(70999),l=t(99289),n=t(37079),i=t(43328),o=t(2906),c=t(66608),d=t(73728),m=t(91352),u=t(6072),h=t(16161),p=t(6919),x=t(34936),f=t(33256),g=t(99280),w=t(97115),v=t(19550),j=t.n(v),b=t(96057);let y=()=>(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{children:"We couldn't load the data needed to upgrade your workspace."}),(0,l.jsxs)("p",{children:["Please refresh the page and try again. If the problem continues, contact our"," ",(0,l.jsx)(j(),{href:"/support",className:"underline",children:"Support"}),"."]})]}),_=e=>{let{hasFetchedWorkspace:s}=e;return(0,l.jsx)(u.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,l.jsxs)(u.c7,{children:[(0,l.jsx)(u.L3,{className:"text-start text-3xl font-medium",children:"Building something big?"}),s?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.rr,{className:"text-sm text-muted-foreground",children:"Out of credits."}),(0,l.jsx)(b.O,{})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(u.rr,{className:"text-sm text-muted-foreground",children:"Loading..."}),(0,l.jsx)(y,{})]})]})})};var N=t(81797),E=t(98213),C=t(45747),I=t(17651),k=t(49944),P=t(86077),R=t(24159);let A=e=>{let{workspace:s,myWorkspaceRole:t,onSendPing:a,onDismiss:r,isSendingPing:n}=e,i=async()=>{N.Ay.capture(R.lY.OUT_OF_CREDITS_DIALOG.SEND_PING_CLICKED,{workspace_id:s.id,workspace_plan:s.plan,workspace_plan_type:s.plan_type,user_role:t}),await a(),E.oR.success("Ping sent!",{description:"The workspace owner has been notified about the credit shortage."})},{owner:o}=(0,I.K4)({workspaceId:s.id});return(0,l.jsxs)(u.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:[(0,l.jsx)(u.c7,{className:"flex flex-col gap-4",children:(0,l.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,l.jsx)(P.Fy,{className:"size-9"}),(0,l.jsx)(u.L3,{className:"text-start text-3xl font-medium",children:"Workspace out of credits"}),(0,l.jsx)(u.rr,{className:"text-start text-sm text-muted-foreground",children:"Only the workspace owner can upgrade and add more credits. Send a ping and continue building."})]})}),(0,l.jsx)("div",{className:"rounded-lg p-3",children:(0,l.jsx)(C.P,{id:(null==o?void 0:o.user_id)||s.owner_id,username:(null==o?void 0:o.display_name)||"Owner",displayName:null==o?void 0:o.display_name,email:(null==o?void 0:o.email)||"",avatarClassName:"h-8 w-8",actionComponent:(0,l.jsx)("span",{className:"text-xs text-muted-foreground",children:"Owner"}),showBadge:!1})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)(k.$,{variant:"outline",className:"flex-1",onClick:()=>{N.Ay.capture(R.lY.OUT_OF_CREDITS_DIALOG.DISMISS_CLICKED,{workspace_id:s.id,workspace_plan:s.plan,workspace_plan_type:s.plan_type,user_role:t}),r()},children:"Dismiss"}),(0,l.jsx)(k.$,{className:"h-8 flex-1",onClick:i,disabled:n,children:n?"Sending...":"Send a ping"})]})]})};var O=t(99605),S=function(e){return e.INACTIVE_WORKSPACE="INACTIVE_WORKSPACE",e.FREE_DAILY_LIMIT="FREE_DAILY_LIMIT",e.FREE_MONTHLY_LIMIT="FREE_MONTHLY_LIMIT",e.LEGACY_DAILY_LIMIT="LEGACY_DAILY_LIMIT",e.PAID_MONTHLY_LIMIT="PAID_MONTHLY_LIMIT",e}({});let T={INACTIVE_WORKSPACE:{title:"Reactivate your workspace",subtitle:"Your workspace is inactive. Upgrade to continue building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"You've used today's free credits. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},FREE_MONTHLY_LIMIT:{title:"Monthly limit reached",subtitle:"You've used all your free credits this month. Upgrade to keep building.",showCreditDifference:!1,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!1,showPlanDropdown:!0},LEGACY_DAILY_LIMIT:{title:"Daily limit reached",subtitle:"Your plan has daily limits. Upgrade to a modern plan with monthly credits.",showCreditDifference:!1,showWhatsChanging:!0,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0},PAID_MONTHLY_LIMIT:{title:"Need more credits?",subtitle:"You've used your monthly credits. Add more to continue this month.",showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!1,showNextBillingCycle:!0,showPlanDropdown:!0}};function L(e){let{workspace:s,membership:t,hasFetchedWorkspace:r,onClose:i,scenario:d}=e,{isAuthenticated:v,authUser:j}=(0,n.Z2)(),{userData:b}=(0,c.ur)(),{setPricingScenario:y,selectedProPlan:N,selectedBizPlan:E,currentPlan:C}=(0,o.et)(),{sendCreditsPing:I,isSendingPing:k}=function(e){let{workspaceId:s}=e,{mutateAsync:t,isPending:a}=(0,p.n)({mutationFn:async()=>(0,f.P)().post("/workspaces/".concat(s,"/credits-ping")),onError:e=>{(0,x.Ni)(e)}});return{sendCreditsPing:t,isSendingPing:a}}({workspaceId:(null==s?void 0:s.id)||""});(0,a.useEffect)(()=>{y("outOfCredits")},[y]);let P=(0,a.useMemo)(()=>"biz"===(0,w.m6)(C.id)?E:N,[C.id,N,E]),R=T[(0,a.useMemo)(()=>d||(s?function(e){var s,t;let a=e.plan,{isFreePlan:r,isInactivePlan:l,isAmbassadorPlan:n,isPaidPlan:i,isLegacyPlan:o}=(0,w.cb)(a),c=(null!=(s=e.billing_period_credits_limit)?s:0)>0,d=r&&(null!=(t=e.total_credits_used_in_billing_period)?t:0)>=O.le;return l?"INACTIVE_WORKSPACE":r&&!d?"FREE_DAILY_LIMIT":r&&d?"FREE_MONTHLY_LIMIT":(o||n)&&!c?"LEGACY_DAILY_LIMIT":"PAID_MONTHLY_LIMIT"}(s):S.FREE_DAILY_LIMIT),[d,s])],L=(0,a.useMemo)(()=>s?(0,g.Y)({currentPlan:C,targetPlanCategory:(0,w.m6)(P)}):[],[s,C,P]);if(!s)return(0,l.jsx)(_,{hasFetchedWorkspace:r});if(!v||!b)return(0,l.jsx)(u.Cf,{className:"max-h-[90vh] overflow-y-auto",size:"lg",children:(0,l.jsx)(h.E,{className:"h-[400px] w-full"})});let D=null==t?void 0:t.role;return(null==j?void 0:j.uid)!==s.owner_id?(0,l.jsx)(A,{workspace:s,myWorkspaceRole:D,onSendPing:async()=>{await I()},onDismiss:()=>{null==i||i()},isSendingPing:k}):(0,l.jsx)(m.n,{targetPlan:P,availablePlans:L,title:R.title,subtitle:R.subtitle,showCreditDifference:R.showCreditDifference,showWhatsChanging:R.showWhatsChanging,showPlanFeatures:R.showPlanFeatures,showNextBillingCycle:R.showNextBillingCycle,showPlanDropdown:R.showPlanDropdown})}function D(e){let{onClose:s,scenario:t}=e,a=(0,d.B5)(e=>e.projectWorkspace),r=(0,d.B5)(e=>e.membership),n=(0,d.B5)(e=>e.hasFetchedProjectWorkspace);return(0,l.jsx)(L,{workspace:a,membership:r,hasFetchedWorkspace:n,onClose:s,scenario:t})}function M(e){let{onClose:s,scenario:t}=e,a=(0,i.useCurrentWorkspaceStore)(e=>e.currentWorkspace),r=(0,i.useCurrentWorkspaceStore)(e=>e.membership),n=(0,i.useCurrentWorkspaceStore)(e=>e.hasFetchedCurrentWorkspace);return(0,l.jsx)(L,{workspace:a,membership:r,hasFetchedWorkspace:n,onClose:s,scenario:t})}let W=function(){let{onClose:e,scenario:s}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,d.tY)()?(0,l.jsx)(D,{onClose:e,scenario:s}):(0,l.jsx)(M,{onClose:e,scenario:s})},F=()=>{let e=(0,r.f)(W);return(0,a.useCallback)(s=>{e({childProps:{onClose:()=>e(!1),scenario:s}})},[e])}},79062:(e,s,t)=>{t.d(s,{Q:()=>a});function a(e){return Number.isInteger(e)?e.toString():e.toFixed(2)}},82360:(e,s,t)=>{t.d(s,{m:()=>X,$:()=>ee});var a=t(99289),r=t(19550),l=t.n(r),n=t(73728),i=t(39627),o=t(34363),c=t(33256),d=t(11405),m=t(98213),u=t(37079),h=t(23594),p=t(30394),x=t(95358),f=t(49944),g=t(97757),w=t(88852),v=t(99017),j=t(8497),b=t(97115),y=t(79312),_=t(61625),N=t(25276),E=t(89101),C=t(1596),I=t(49612),k=t(72384),P=t(79062);let R=e=>{let{workspace:s,memberships:t}=e,r=new Date().getMonth()+1,l=new Date().getFullYear(),{data:n}=(0,o.I)(k.y.workspaceUsage({workspaceId:null==s?void 0:s.id,month:r,year:l})),{data:i}=(0,o.I)(k.y.workspaceUserTotalUsage({workspaceId:null==s?void 0:s.id})),c=(0,d.useMemo)(()=>null==i?void 0:i.map(e=>{let s=t.find(s=>s.user_id===e.user_id);return s?{...e,membership:s}:null}).filter(e=>null!==e).sort((e,s)=>s.count-e.count),[i,t]),m=(0,d.useMemo)(()=>null==n?void 0:n.user_usages.map(e=>{let s=t.find(s=>s.user_id===e.user_id);return s?{...e,membership:s}:null}).filter(e=>null!==e).sort((e,s)=>s.count-e.count),[n,t]);return(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("p",{className:"pb-2 text-sm text-muted-foreground",children:["Showing usage for ",(0,C.GP)(new Date(l,r-1),"MMMM yyyy"),"."]}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:(null==m?void 0:m.length)===0?(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"No usage data for this period. Usage will appear here once members begin using the workspace."}):null==m?void 0:m.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.H,{user:{id:e.user_id,username:e.membership.display_name||e.membership.email},photoURL:e.membership.photo_url}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.membership.display_name||e.membership.email})]}),(0,a.jsxs)("div",{className:"text-muted-foreground",children:[(0,P.Q)(e.count)," credit",1===e.count?"":"s"," used"]})]},e.user_id))}),c&&c.length>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"border-t pt-4",children:[(0,a.jsx)("p",{className:"pb-2 text-sm text-muted-foreground",children:"Total usage across all months."}),(0,a.jsx)("div",{className:"flex flex-col gap-2",children:c.map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(I.H,{user:{id:e.user_id,username:e.membership.display_name||e.membership.email},photoURL:e.membership.photo_url}),(0,a.jsx)("p",{className:"text-sm font-medium",children:e.membership.display_name||e.membership.email})]}),(0,a.jsxs)("div",{className:"font-medium text-muted-foreground",children:[(0,P.Q)(e.count)," credit",1===e.count?"":"s"," total"]})]},e.user_id))})]})})]})};var A=t(45747),O=t(70999),S=t(61461);let T=e=>{let{memberName:s,onConfirm:t,onCancel:r}=e;return(0,a.jsx)(S.A,{title:"Remove workspace member",targetName:s,descriptionTemplate:"Are you sure you want to remove ".concat(s," from this workspace? They will no longer have access to any workspace projects or resources."),onConfirm:t,onCancel:r})};var L=t(5531),D=t(89748),M=t(31126),W=t(48591),F=t(51252),Y=t(6919),U=t(34936),V=t(26516),K=t(13432);let B={owner:"Owner",admin:"Admin",member:"Editor",viewer:"Viewer"},Z={owner:"Owners can manage all collaborators, projects, and integrations.",admin:"Admins can manage editors, projects, and integrations.",member:"Editors can only create and edit projects.",viewer:"Viewers can only view projects."},H=e=>{var s,t;let{currentMembership:r,workspaceId:l,workspace:n,permissions:i}=e,[o,m]=(0,d.useState)(null!=(s=r.monthly_credit_limit)?s:void 0),[h,p]=(0,d.useState)(!1),j=(0,d.useRef)(null),{authUser:_}=(0,u.Z2)(),N=r.user_id===(null==_?void 0:_.uid),E=(0,O.f)(T),C=!r.joined_at||""===r.joined_at,{isPaidPlan:I}=(0,b.cb)(n.plan),k=(0,x.BK)(),P=y.ss.some(e=>i.includes(e)),R=i.includes(y.eZ.AddWorkspaceViewers),S=(0,y.mk)(r.role,N,i),H=i.includes(y.eZ.UpdateWorkspaceCreditLimit),{updateWorkspaceMemberRole:q}=function(e){let{workspaceId:s}=e,t=(0,F.jE)(),a=(0,V.H)(),{mutateAsync:r}=(0,Y.n)({mutationFn:async e=>{let{userId:t,role:a}=e,r=(0,c.P)();return await r.put("/workspaces/".concat(s,"/memberships/").concat(t),{role:a})},onMutate:async e=>{await (0,K.Pf)(t,s),(0,K.I7)(t,s,a,s=>s.map(s=>s.user_id===e.userId?{...s,role:e.role}:s))},onSuccess:async e=>{e&&(0,K.I7)(t,s,a,s=>s.map(s=>s.user_id===e.user_id?e:s)),(0,K.y)(t,s,a,{refetch:!1})},onError:()=>{(0,K.y)(t,s,a,{refetch:!0})}});return{updateWorkspaceMemberRole:r}}({workspaceId:l}),{updateWorkspaceMemberCreditLimit:z}=function(e){let{workspaceId:s}=e,t=(0,F.jE)(),a=(0,V.H)(),{mutateAsync:r}=(0,Y.n)({mutationFn:async e=>{let{userId:t,monthlyCreditLimit:a}=e,r=(0,c.P)();await r.put("/user/workspaces/".concat(s,"/memberships/").concat(t),{monthly_credit_limit:null!=a?a:-1})},onMutate:async e=>{await (0,K.Pf)(t,s),(0,K.I7)(t,s,a,s=>s.map(s=>s.user_id===e.userId?{...s,monthly_credit_limit:-1===e.monthlyCreditLimit?null:e.monthlyCreditLimit}:s))},onError:e=>{(0,U.Ni)(e)},onSettled:()=>{(0,K.y)(t,s,a)}});return{updateWorkspaceMemberCreditLimit:r}}({workspaceId:l}),{removeWorkspaceMember:$}=function(e){let{workspaceId:s}=e,t=(0,F.jE)(),a=(0,V.H)(),{mutateAsync:r}=(0,Y.n)({mutationFn:async e=>{let{userId:t}=e,a=(0,c.P)();await a.delete("/workspaces/".concat(s,"/memberships/").concat(t))},onMutate:async e=>{await (0,K.Pf)(t,s),(0,K.I7)(t,s,a,s=>s.filter(s=>s.user_id!==e.userId),void 0,e=>Math.max(0,e-1))},onError:e=>{(0,U.Ni)(e)},onSettled:()=>{(0,K.y)(t,s,a)}});return{removeWorkspaceMember:r}}({workspaceId:l}),G=(0,d.useCallback)(async e=>{C||await z({userId:r.user_id,monthlyCreditLimit:isNaN(null!=e?e:0)?-1:e})},[r.user_id,C,z]);(0,d.useEffect)(()=>{let e=e=>{h&&j.current&&!j.current.contains(e.target)&&G(o).then(()=>{p(!1)})};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[h,o,z,G]);let Q=async e=>{if(!C){if("viewer"===e&&!R)return void k(x.KU.PRO_CHANGE_VIEWER_ROLE);await q({userId:r.user_id,role:e})}},J=()=>{E({childProps:{memberName:r.display_name||r.username,onConfirm:async()=>{await $({userId:r.user_id}),E(!1)},onCancel:()=>E(!1)}})},X=(0,W.ZS)(),ee=(0,a.jsxs)(a.Fragment,{children:[H&&X&&(0,a.jsxs)(v.m_,{delayDuration:600,children:[(0,a.jsx)(v.k$,{asChild:!0,children:h?(0,a.jsxs)("div",{ref:j,className:"relative flex items-center",children:[(0,a.jsx)(w.p,{placeholder:"Limit / month",value:o||"",className:"max-w-32 pr-8 text-xs",onChange:e=>m(parseInt(e.target.value)),onKeyDown:e=>{if("Enter"===e.key)G(o).then(()=>{p(!1)});else if("Escape"===e.key){var s;m(null!=(s=r.monthly_credit_limit)?s:void 0),p(!1)}},autoFocus:!0}),(0,a.jsx)(f.$,{variant:"ghost",size:"icon",className:"absolute right-0.5 h-8 w-8 shadow-none hover:bg-accent hover:shadow-none",onClick:()=>{G(o).then(()=>{p(!1)})},children:(0,a.jsx)(g.A,{name:"check",size:"small"})})]}):(0,a.jsx)(f.$,{variant:"ghost",size:"sm",className:"text-xs shadow-none hover:bg-accent hover:shadow-none",onClick:()=>p(!0),children:(null==r?void 0:r.monthly_credit_limit)?"".concat(r.monthly_credit_limit," credits/mo"):"No limit"})}),(0,a.jsx)(v.ZI,{className:"max-w-[30ch]",children:"Update credit limits for this member"})]}),(0,a.jsxs)(L.rI,{children:[(0,a.jsxs)(v.m_,{children:[(0,a.jsx)(v.k$,{asChild:!0,children:(0,a.jsx)(L.ty,{asChild:!0,disabled:!S||!P,children:(0,a.jsxs)(f.$,{"aria-haspopup":"true",variant:"ghost",children:[C?"Pending":B[r.role]," ",(0,a.jsx)(g.A,{name:"keyboard_arrow_down",size:"small",className:"opacity-50"})]})})}),(0,a.jsx)(v.ZI,{className:"max-w-[30ch]",children:C?"This user has been invited to join as ".concat(B[r.role]):Z[r.role]})]}),(0,a.jsx)(L.SQ,{align:"end",children:C?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.t,{label:"Pending",isSelected:!0,onClick:()=>{},disabled:!0}),(0,a.jsx)(D.t,{label:"Remove",destructive:!0,onClick:J,disabled:!S})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(D.t,{label:"Owner",isSelected:"owner"===r.role,onClick:()=>Q("owner"),disabled:!i.includes(y.eZ.AddWorkspaceOwners)||!S,tooltip:Z.owner}),(0,a.jsx)(D.t,{label:"Admin",isSelected:"admin"===r.role,onClick:()=>Q("admin"),disabled:!i.includes(y.eZ.AddWorkspaceAdmins)||!S,tooltip:Z.admin}),(0,a.jsx)(D.t,{label:"Editor",isSelected:"member"===r.role,onClick:()=>Q("member"),disabled:!i.includes(y.eZ.AddWorkspaceEditors)||!S,tooltip:Z.member}),(0,a.jsx)(D.t,{label:"Viewer",isSelected:"viewer"===r.role,onClick:()=>Q("viewer"),disabled:!i.includes(y.eZ.AddWorkspaceViewers)||!S,tooltip:I?Z.viewer:"Viewer role requires a Pro plan. Click to upgrade.",rightElement:(0,a.jsx)(M.M,{workspace:n,requiredPlanCategory:"pro"})}),(0,a.jsx)(D.t,{label:N?"Leave":"Remove",destructive:!0,onClick:J,disabled:!S})]})})]})]});return(0,a.jsx)(A.P,{id:r.user_id,username:r.username,displayName:null!=(t=r.display_name)?t:r.email,photoURL:r.photo_url,avatarClassName:"h-8 w-8",actionComponent:ee,isCurrentUser:N,email:r.email,isInvited:C})},q=[{label:"All",value:"all"},{label:"Active",value:"active"},{label:"Pending",value:"pending"}],z=e=>{let{currentPage:s,totalPages:t,onPreviousPage:r,onNextPage:l,onFirstPage:n,onLastPage:i,totalCount:o,pageSize:c}=e;if(t<=1)return null;let d=Math.min(s*c,o);return(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Showing ",(s-1)*c+1,"-",d," of ",o," members"]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:n,disabled:1===s,children:(0,a.jsx)(g.A,{name:"first_page",className:"h-4 w-4"})}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:r,disabled:1===s,children:(0,a.jsx)(g.A,{name:"chevron_left",className:"h-4 w-4"})}),(0,a.jsxs)("span",{className:"text-sm font-medium",children:[s," of ",t]}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:l,disabled:s===t,children:(0,a.jsx)(g.A,{name:"chevron_right",className:"h-4 w-4"})}),(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:i,disabled:s===t,children:(0,a.jsx)(g.A,{name:"last_page",className:"h-4 w-4"})})]})]})},$=e=>{var s;let{memberships:t,workspace:r,searchParams:l,search:n,total:i,isLoading:o,PAGE_SIZE:c}=e,{authUser:C}=(0,u.Z2)(),[I,k]=(0,d.useState)(l.status||"all"),[P,A]=(0,d.useState)(l.query||""),O=(0,j.d)(P,250);(0,d.useEffect)(()=>{let e=O;e.length<3&&(e=""),n({query:e,offset:0,status:I})},[O,I,n]);let S="free"===(0,b.m6)(r.plan),T=(0,x.BK)(),{inviteWorkspaceMember:L,isInvitingMember:D}=(0,E.s)({workspaceId:r.id}),{exportMembers:M,isExporting:W}=function(e){let[s,t]=(0,d.useState)(!1);return{exportMembers:async()=>{try{t(!0);let s=await N.b.getValidToken(),a={};s&&(a.Authorization="Bearer ".concat(s));let r=(0,_.N)(),l=await fetch("".concat(r,"/workspaces/").concat(e,"/memberships/export"),{method:"GET",headers:a,credentials:"include"});if(!l.ok)throw Error("Export failed: ".concat(l.statusText));let n=l.headers.get("Content-Disposition"),i=new Date,o=e=>String(e).padStart(2,"0"),c="workspace_members_".concat(i.getUTCFullYear(),"-").concat(o(i.getUTCMonth()+1),"-").concat(o(i.getUTCDate()),"_").concat(o(i.getUTCHours()),"-").concat(o(i.getUTCMinutes()),".csv");if(n){let e=n.match(/filename="([^"]+)"/i);(null==e?void 0:e[1])&&(c=e[1])}let d=await l.blob(),m=URL.createObjectURL(d),u=document.createElement("a");return u.href=m,u.download=c,u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),URL.revokeObjectURL(m),{success:!0}}catch(e){return{success:!1,error:e}}finally{t(!1)}},isExporting:s}}(r.id),F=async()=>{let e=m.oR.loading("Preparing CSV export..."),s=await M();(null==s?void 0:s.success)?m.oR.success("Export ready. Download should begin shortly.",{id:e,duration:4e3}):m.oR.error("Export failed. Please try again.",{id:e})},Y=async e=>{let{emails:s,role:t}=e;if(0===s.length)return{success:!1};if("viewer"===t&&S)return T(x.KU.PRO_CHANGE_VIEWER_ROLE),{success:!1};let a=0;for(let e of s)await L({email:e,role:t}),a++;return{success:a>0}},U=e=>{A(e)},{permissions:V}=(0,h.S)(),K=V.includes(y.eZ.ViewWorkspaceUsage),B=y.ss.some(e=>V.includes(e));return(0,a.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Invite new members"}),(0,a.jsx)(p.M,{onInvite:e=>{let{emails:s,role:t}=e;return Y({emails:s,role:t})},isInviting:D,roleOptions:[{value:"admin",label:"Admin"},{value:"member",label:"Editor"},{value:"viewer",label:"Viewer"}],canSelectRoles:B,defaultRole:"member",placeholder:"Add emails",completelyDisabled:!B,workspace:r})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h4",{className:"text-sm font-medium",children:"Members"}),(P||"all"!==I)&&(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:[i," members found"]})]}),K&&(0,a.jsxs)(v.m_,{children:[(0,a.jsx)(v.k$,{asChild:!0,children:(0,a.jsx)(f.$,{variant:"outline",size:"sm",onClick:F,disabled:W,"aria-label":"Export members CSV",children:W?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{name:"refresh",className:"mr-1 h-4 w-4 animate-spin"}),"Exporting..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{name:"download",className:"mr-1 h-4 w-4"}),"Export"]})})}),(0,a.jsx)(v.ZI,{align:"end",children:"Exports all workspace members as a CSV, including monthly usage and credit limits."})]})]}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(g.A,{name:"search",className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),(0,a.jsx)(w.p,{type:"text",placeholder:"Search members by name or email...",value:P,onChange:e=>U(e.target.value),className:"pl-9"}),P&&(0,a.jsx)(f.$,{variant:"ghost",size:"sm",className:"absolute right-1 top-1/2 h-6 w-6 -translate-y-1/2 p-0",onClick:()=>U(""),children:(0,a.jsx)(g.A,{name:"close",className:"h-3 w-3"})})]}),(0,a.jsx)("div",{className:"flex gap-2",children:q.map(e=>{let{label:s,value:t}=e;return(0,a.jsx)(f.$,{variant:I===t?"default":"outline",size:"sm",onClick:()=>{k(t)},className:"text-xs",children:s},t)})}),(0,a.jsx)("div",{className:"flex flex-col gap-2 border-b pb-3",children:o?(0,a.jsx)("div",{className:"flex items-center justify-center py-8 text-sm text-muted-foreground",children:"Loading members..."}):t.length>0?t.map(e=>e?(0,a.jsx)(H,{currentMembership:e,workspaceId:r.id,workspace:r,permissions:V},"".concat(e.email,"-").concat(e.user_id)):null):(0,a.jsx)("div",{className:"flex items-center justify-center py-8 text-sm text-muted-foreground",children:P||"all"!==I?"No members found".concat(P?' for "'.concat(P,'"'):""):"No members found"})}),(0,a.jsx)(z,{currentPage:Math.floor((null!=(s=l.offset)?s:0)/c)+1,totalPages:Math.ceil(i/c),onPreviousPage:()=>{var e;return n({offset:Math.max(0,(null!=(e=l.offset)?e:0)-c)})},onNextPage:()=>{var e;return n({offset:(null!=(e=l.offset)?e:0)+c})},onFirstPage:()=>n({offset:0}),onLastPage:()=>n({offset:Math.floor((i-1)/c)*c}),totalCount:i,pageSize:c})]}),K&&t&&(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("h4",{children:"Usage"}),(0,a.jsx)(R,{workspace:r,memberships:t})]})]})};var G=t(17651);function Q(e){let{data:s,isLoading:t}=(0,o.I)({queryKey:["workspace",e,"maxSeats"],queryFn:async()=>{let s=(0,c.P)();return(await s.get("/workspaces/".concat(e,"/max-seats"))).max_seats},enabled:!!e}),{memberCount:a}=(0,G.yj)({workspaceId:e,status:"all"});return{maxSeats:s,isLoadingMaxSeats:t,memberCount:a}}function J(e,s,t,r){return(0,a.jsxs)(a.Fragment,{children:["Inviting people to ",(0,a.jsx)("strong",{children:e.name||"the workspace"})," gives access to workspace shared projects and credits."," ",null!=t?(0,a.jsxs)(a.Fragment,{children:["You're using ",s,"/",r?"...":t," seats. Need more?"," ",(0,a.jsx)(l(),{className:"underline",target:"_blank",href:"https://enterpriseform.lovable.app/",children:"Contact us"}),"."]}):(0,a.jsxs)(a.Fragment,{children:["You have ",s," people in this workspace."]})]})}let X=20,ee=e=>{let{workspace:s}=e,t=(0,n.tY)(),{members:r,total:l,isLoading:i,search:o,searchParams:c}=(0,G._A)({workspaceId:s.id});return t?(0,a.jsx)(et,{workspace:s,members:r,total:l,isLoading:i,search:o,searchParams:c}):(0,a.jsx)(es,{workspace:s,members:r,total:l,isLoading:i,search:o,searchParams:c})};function es(e){let{workspace:s,members:t,total:r,isLoading:l,search:n,searchParams:o}=e,{maxSeats:c,isLoadingMaxSeats:d,memberCount:m}=Q(s.id),u=J(s,m,c,d);return(0,a.jsx)(i.Pt,{title:"People",value:"people",description:u,docsLink:"https://docs.lovable.dev/user-guides/teams",children:(0,a.jsx)(V.k,{searchParams:o,children:(0,a.jsx)($,{memberships:t,workspace:s,searchParams:o,search:n,total:r,isLoading:l,PAGE_SIZE:X})})})}function et(e){let{workspace:s,members:t,total:r,isLoading:l,search:n,searchParams:o}=e,{maxSeats:c,isLoadingMaxSeats:d,memberCount:m}=Q(s.id),u=J(s,m,c,d);return(0,a.jsx)(i.Pt,{title:"People",value:"people",description:u,children:(0,a.jsx)($,{memberships:t,workspace:s,searchParams:o,search:n,total:r,isLoading:l,PAGE_SIZE:X})})}},89101:(e,s,t)=>{t.d(s,{s:()=>d});var a=t(51252),r=t(6919),l=t(34936),n=t(33256),i=t(72384),o=t(26516),c=t(13432);function d(e){let{workspaceId:s}=e,t=(0,a.jE)(),d=(0,o.H)(),{mutateAsync:m,isPending:u}=(0,r.n)({mutationFn:async e=>{let{email:t,role:a="member"}=e;return(0,n.P)().post("/workspaces/".concat(s,"/memberships"),{email:t,role:a})},onSuccess:async e=>{if(e){let r=i.y.workspaceMemberships({workspaceId:s}),l=t.getQueryData(r.queryKey);if(l&&!l.members.some(s=>s.user_id===e.user_id)){var a;t.setQueryData(r.queryKey,{...l,members:[...l.members,e],total:l.total+1,limit:l.limit,offset:null!=(a=l.offset)?a:0,has_more:l.has_more})}if(d&&(!d.query||""===d.query.trim())){let a=i.y.searchWorkspaceMemberships({workspaceId:s,params:d}),r=t.getQueryData(a.queryKey);r&&(r.members.some(s=>s.user_id===e.user_id)||t.setQueryData(a.queryKey,{...r,members:[...r.members,e],total:r.total+1,limit:r.limit,offset:r.offset,has_more:r.has_more}))}}(0,c.y)(t,s,d)},onError:e=>{(0,l.Ni)(e)}});return{inviteWorkspaceMember:m,isInvitingMember:u}}},89748:(e,s,t)=>{t.d(s,{t:()=>c});var a=t(99289),r=t(11405),l=t(5531),n=t(97757),i=t(26551),o=t(99017);let c=e=>{let{label:s,isSelected:t,onClick:c,disabled:d,className:m,destructive:u,tooltip:h,rightElement:p}=e,[x,f]=(0,r.useState)(!1);return(0,a.jsxs)(o.m_,{open:void 0!==h&&x,onOpenChange:f,children:[(0,a.jsx)(o.k$,{asChild:!0,children:(0,a.jsxs)(l._2,{onClick:c,disabled:d,className:(0,i.cn)("flex items-center justify-between",{"bg-muted":t,"cursor-default":d,"text-destructive-primary focus:bg-destructive focus:text-destructive-foreground":u},m),children:[(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[s,p]}),t&&(0,a.jsx)(n.A,{name:"check",size:"small"})]})}),(0,a.jsx)(o.ZI,{side:"right",className:"max-w-[30ch]",children:h})]})}},95358:(e,s,t)=>{t.d(s,{KU:()=>c,BK:()=>u});var a=t(11405),r=t(70999),l=t(99289),n=t(2906),i=t(91352),o=t(99280),c=function(e){return e.BIZ_TEMPLATES="BIZ_TEMPLATES",e.BIZ_PERSONAL_PROJECT="BIZ_PERSONAL_PROJECT",e.BIZ_SSO="BIZ_SSO",e.PRO_SUPPORT="PRO_SUPPORT",e.PRO_VIEWER_INVITE_LINK="PRO_VIEWER_INVITE_LINK",e.PRO_SEND_VIEWER_INVITE="PRO_SEND_VIEWER_INVITE",e.PRO_CHANGE_VIEWER_ROLE="PRO_CHANGE_VIEWER_ROLE",e.PRO_DOMAIN_CONNECT="PRO_DOMAIN_CONNECT",e.PRO_HIDE_BADGE="PRO_HIDE_BADGE",e.PRO_PRIVATE_PROJECT="PRO_PRIVATE_PROJECT",e.PRO_EDITORS_CAN_INVITE="PRO_EDITORS_CAN_INVITE",e}({});let d={BIZ_TEMPLATES:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to use templates.",targetPlanCategory:"biz"},BIZ_PERSONAL_PROJECT:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to make a project personal.",targetPlanCategory:"biz"},BIZ_SSO:{title:"Upgrade to Business",subtitle:"You need to be on a business plan to add SSO providers.",targetPlanCategory:"biz"},PRO_SUPPORT:{title:"Upgrade to Pro",subtitle:"You need to be on a paid plan to access direct support.",targetPlanCategory:"pro"},PRO_VIEWER_INVITE_LINK:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to create a viewer invite link.",targetPlanCategory:"pro"},PRO_SEND_VIEWER_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to invite viewers.",targetPlanCategory:"pro"},PRO_CHANGE_VIEWER_ROLE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the role to viewer.",targetPlanCategory:"pro"},PRO_DOMAIN_CONNECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to connect a domain.",targetPlanCategory:"pro"},PRO_HIDE_BADGE:{title:"Upgrade to Pro",subtitle:'You need to be on a pro plan to hide the "Edit with Lovable" badge.',targetPlanCategory:"pro"},PRO_PRIVATE_PROJECT:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to make a project private.",targetPlanCategory:"pro"},PRO_EDITORS_CAN_INVITE:{title:"Upgrade to Pro",subtitle:"You need to be on a pro plan to change the editor invitation permissions.",targetPlanCategory:"pro"}},m=e=>{let{scenario:s}=e,t=d[s],{currentPlan:a}=(0,n.et)(),r=(0,o.Y)({currentPlan:a,targetPlanCategory:t.targetPlanCategory});return(0,l.jsx)(i.n,{targetPlan:r[0],availablePlans:r,title:t.title,subtitle:t.subtitle,showCreditDifference:!0,showWhatsChanging:!1,showPlanFeatures:!0,showNextBillingCycle:!0,showPlanDropdown:!1})},u=()=>{let e=(0,r.f)(m);return(0,a.useCallback)(s=>{e({childProps:{onClose:()=>e(!1),scenario:s}})},[e])}},96057:(e,s,t)=>{t.d(s,{O:()=>i});var a=t(99289),r=t(20234),l=t(16161),n=t(26551);let i=e=>{let{showEnterpriseCard:s=!1,className:t}=e;return(0,a.jsxs)("div",{className:(0,n.cn)("flex w-full flex-col gap-4",t),children:[(0,a.jsxs)("div",{className:"grid w-full grid-cols-1 gap-5 sm:grid-cols-3",children:[(0,a.jsxs)(r.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]})})]})]}),(0,a.jsxs)(r.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3,4,5].map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]},e))})]})]}),(0,a.jsxs)(r.Zp,{className:"flex h-full flex-col gap-3 px-4 py-6",children:[(0,a.jsx)(l.E,{className:"h-6 w-24"}),(0,a.jsxs)("div",{className:"flex items-baseline gap-1",children:[(0,a.jsx)(l.E,{className:"h-9 w-20"}),(0,a.jsx)(l.E,{className:"h-5 w-16"})]}),(0,a.jsx)(l.E,{className:"h-4 w-full"}),(0,a.jsx)(l.E,{className:"mb-2 h-9 w-full"}),(0,a.jsx)(l.E,{className:"h-9 w-full"}),(0,a.jsxs)("div",{className:"mt-2 flex flex-col gap-4",children:[(0,a.jsx)(l.E,{className:"h-4 w-32"}),(0,a.jsx)("div",{className:"flex flex-col gap-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-2",children:[(0,a.jsx)(l.E,{className:"h-4 w-4"}),(0,a.jsx)(l.E,{className:"h-4 w-full"})]},e))})]})]})]}),s&&(0,a.jsxs)(r.Zp,{className:"flex w-full flex-col items-center justify-between gap-4 px-4 py-6 md:flex-row",children:[(0,a.jsxs)("div",{className:"flex flex-shrink flex-col gap-2",children:[(0,a.jsx)(l.E,{className:"h-6 w-32"}),(0,a.jsx)(l.E,{className:"h-4 w-64"})]}),(0,a.jsx)(l.E,{className:"h-9 w-36"})]})]})}}}]);